<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Model Object Diagnostic Tool</title>
    <style>
        body { margin: 0; font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; }
        #info { text-align: center; color: black; font-size: 1.5em; padding: 2em; border: 2px solid #ccc; border-radius: 10px; }
    </style>
</head>
<body>
    <div id="info">Running diagnostics...<br>Please open the F12 Developer Console.</div>

    <script type="importmap">
        { "imports": { "three": "https://unpkg.com/three@0.163.0/build/three.module.js", "three/addons/": "https://unpkg.com/three@0.163.0/examples/jsm/" } }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OBJLoader } from 'three/addons/loaders/OBJLoader.js';

        const infoDiv = document.getElementById('info');
        console.log("--- Starting Model Object Diagnostic ---");

        try {
            const loader = new OBJLoader();
            const objFileName = 'FloorPlan_Hydro.obj';

            loader.load(
                objFileName,
                function (object) {
                    const allObjectDetails = [];

                    // Iterate through all parts of the loaded model
                    object.traverse(function (child) {
                        if (child instanceof THREE.Mesh) {
                            
                            // Calculate the size (dimensions) of this piece
                            const box = new THREE.Box3().setFromObject(child);
                            const size = box.getSize(new THREE.Vector3());

                            allObjectDetails.push({
                                name: child.name,
                                width_cm: size.x.toFixed(2),
                                height_cm: size.y.toFixed(2),
                                depth_cm: size.z.toFixed(2)
                            });
                        }
                    });

                    // --- THIS IS THE CRUCIAL PART ---
                    console.log("--- DIAGNOSTIC RESULTS ---");
                    console.log("Model Loaded Successfully.");
                    console.log("Found the following objects in your file:");
                    console.table(allObjectDetails); // A clean table of EVERY object found
                    console.log("--------------------------");

                    infoDiv.innerHTML = `<strong style="color: green;">Diagnostic Complete!</strong><br>Please copy the full table from the F12 developer console and send it back to me.`;
                },
                function (xhr) {
                    if (xhr.lengthComputable) {
                        infoDiv.textContent = `Loading: ${(xhr.loaded / xhr.total * 100).toFixed(2)}%`;
                    }
                },
                function (error) {
                    console.error('An error happened during OBJ loading:', error);
                    infoDiv.innerHTML = `<span style="color: red;"><strong>Error:</strong> Could not load the OBJ file. Check the browser console (F12) for a 404 error.</span>`;
                }
            );
        } catch(e) {
            console.error("A critical error occurred:", e);
            infoDiv.innerHTML = `<span style="color: red;"><strong>Critical Error:</strong> ${e.message}</span>`;
        }
    </script>
</body>
</html>